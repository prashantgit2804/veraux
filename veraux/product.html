<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details | Veraux</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <button class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
            <a href="index.html" class="logo">VERAUX</a>
            <nav class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="shop.html" class="nav-link">Shop</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="contact.html" class="nav-link">Contact</a>
            </nav>
            <div class="nav-icons">
                <a href="#" class="nav-link"><i class="far fa-heart"></i></a>
                <a href="cart.html" class="nav-link">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="cart-count">0</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Product Details -->
    <div class="container product-detail-container" id="product-container">
        <!-- Injected via JS -->
        <p style="text-align: center; padding: 5rem;">Loading product...</p>
    </div>

    <!-- Related Products -->
    <section class="section container related-products">
        <h2 class="heading-lg text-center">You May Also Like</h2>
        <div class="grid" style="grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: var(--spacing-md);"
            id="related-grid">
            <!-- Injected via JS -->
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container grid"
            style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
            <div>
                <h2 class="logo" style="margin-bottom: var(--spacing-sm);">VERAUX</h2>
            </div>
            <div>
                <h4>Shop</h4>
                <ul class="footer-links">
                    <li><a href="shop.html?category=jewelry">Jewelry</a></li>
                </ul>
            </div>
            <div>
                <h4>Customer Care</h4>
                <ul class="footer-links">
                    <li><a href="contact.html">Contact Us</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Veraux. All rights reserved.</p>
        </div>
    </footer>

    <script type="module" src="js/main.js"></script>
    <script type="module">
        import { products } from './js/products.js';
        import { cart } from './js/cart.js';

        // Get ID from URL
        const params = new URLSearchParams(window.location.search);
        const productId = params.get('id');
        const container = document.getElementById('product-container');

        const product = products.find(p => p.id === productId);

        if (!product) {
            container.innerHTML = `<div class="text-center section"><h2>Product not found</h2><a href="shop.html" class="btn btn-primary">Return to Shop</a></div>`;
        } else {
            // Render Product
            container.innerHTML = `
                <div class="product-layout fade-in">
                    <div class="product-gallery">
                        <img src="${product.image}" alt="${product.name}" class="main-image" id="main-img">
                        <div class="thumbnail-list">
                            <img src="${product.image}" class="thumbnail active" onclick="changeImage(this.src)">
                            <!-- Fake extra thumbnails for demo -->
                            <img src="${product.image}" class="thumbnail" style="filter: hue-rotate(90deg);" onclick="changeImage(this.src)">
                            <img src="${product.image}" class="thumbnail" style="filter: sepia(1);" onclick="changeImage(this.src)">
                        </div>
                    </div>
                    <div class="product-info-col">
                        <p style="text-transform: uppercase; color: var(--color-text-light); letter-spacing: 1px; font-size: 0.9rem;">${product.category}</p>
                        <h1>${product.name}</h1>
                        <span class="price-lg">$${product.price.toLocaleString()}</span>
                        
                        <div class="description-text">
                            <p>${product.description}</p>
                        </div>
                        
                        <div class="attribute-row">
                            <strong>Material:</strong> ${product.material}
                        </div>

                        <div class="attribute-row" style="display: flex; align-items: center;">
                            <div class="qty-selector">
                                <button class="qty-btn" onclick="updateQty(-1)">-</button>
                                <input type="number" id="qty-input" class="qty-input" value="1" min="1" readonly>
                                <button class="qty-btn" onclick="updateQty(1)">+</button>
                            </div>
                            <button id="add-to-cart-btn" class="btn btn-primary add-btn">Add to Cart</button>
                        </div>

                         <div class="attribute-row">
                             <button class="btn btn-outline" style="font-size: 0.8rem; padding: 10px 20px;"><i class="far fa-heart"></i> Add to Wishlist</button>
                         </div>
                    </div>
                </div>
            `;

            // Related Products (Same category, exclude current)
            const related = products
                .filter(p => p.category === product.category && p.id !== product.id)
                .slice(0, 4);

            const relatedGrid = document.getElementById('related-grid');
            relatedGrid.innerHTML = related.map(p => `
                <div class="product-card">
                    <div class="product-image-container">
                        <a href="product.html?id=${p.id}">
                            <img src="${p.image}" alt="${p.name}" class="product-image">
                        </a>
                    </div>
                    <div class="product-details text-center">
                        <a href="product.html?id=${p.id}"><h3>${p.name}</h3></a>
                        <p class="product-price">$${p.price.toLocaleString()}</p>
                    </div>
                </div>
            `).join('');

            // Add Event Listeners
            window.updateQty = (change) => {
                const input = document.getElementById('qty-input');
                let val = parseInt(input.value) + change;
                if (val < 1) val = 1;
                input.value = val;
            };

            window.changeImage = (src) => {
                document.getElementById('main-img').src = src;
                document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                event.target.classList.add('active');
            };

            document.getElementById('add-to-cart-btn').addEventListener('click', () => {
                const qty = parseInt(document.getElementById('qty-input').value);
                cart.add(product, qty);
            });
        }
    </script>
</body>

</html>